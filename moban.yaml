# Clash Meta å…¨é‡é…ç½®æ¨¡æ¿ï¼ˆå«è®¢é˜…ã€ç­–ç•¥ç»„ã€è§„åˆ™é›†ã€DNSç­‰ï¼‰

# ==================== é€šç”¨è®¾ç½® ====================
port: 7890
socks-port: 7891
redir-port: 7892
tproxy-port: 7893
mixed-port: 7890
allow-lan: true
mode: rule
log-level: info
external-controller: 127.0.0.1:9090
secret: ""
bind-address: "*"
unified-delay: true
ipv6: false

# ==================== DNS è®¾ç½® ====================
dns:
  enable: true
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-filter:
    - '*.lan'
    - 'localhost'
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fallback:
    - tls://1.1.1.1:853
    - tls://8.8.4.4:853
  fallback-filter:
    geoip: true
    geoip-code: CN

# ==================== è®¢é˜…èŠ‚ç‚¹ï¼ˆOpenClash ä¼šè‡ªåŠ¨æ’å…¥ï¼‰ ====================
proxy-providers:
  Airport:
    type: http
    url: "__SUBSCRIPTION_URL__"  # â† è¿™é‡Œç”± OpenClash åŠ¨æ€æ›¿æ¢
    interval: 86400
    path: ./proxy_provider/Airport.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

# ==================== ç­–ç•¥ç»„ ====================
proxy-groups:
  - {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, type: url-test, use: [Airport], url: "http://www.gstatic.com/generate_204", interval: 300}
  - {name: ğŸ“º NETFLIX, type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, DIRECT]}
  - {name: ğŸ“° å›½å¤–åª’ä½“, type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, DIRECT]}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼, type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, DIRECT]}
  - {name: ğŸŒ å…¨çƒç›´è¿, type: select, proxies: [DIRECT, â™»ï¸ è‡ªåŠ¨é€‰æ‹©]}

# åŒºåŸŸè‡ªåŠ¨ç­–ç•¥ç»„ï¼ˆæ ¹æ®ä½ æä¾›çš„ç»“æ„ï¼‰
  - {name: auto ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, type: url-test, include-all: true, filter: "(?i)(æ–°åŠ å¡|ç‹®åŸ|Singapore|SG)", interval: 300, tolerance: 20}
  - {name: auto ğŸ‡­ğŸ‡° é¦™æ¸¯, type: url-test, include-all: true, filter: "(?i)(é¦™æ¸¯|Hong Kong|HK)", interval: 300, tolerance: 20}
  - {name: auto ğŸ‡¯ğŸ‡µ æ—¥æœ¬, type: url-test, include-all: true, filter: "(?i)(æ—¥æœ¬|JP|Japan)", interval: 300, tolerance: 20}
  - {name: auto ğŸ‡ºğŸ‡¸ ç¾å›½, type: url-test, include-all: true, filter: "(?i)(ç¾å›½|US|United States|America)", interval: 300, tolerance: 20}
  - {name: auto ğŸ‡¹ğŸ‡¼ å°æ¹¾, type: url-test, include-all: true, filter: "(?i)(å°æ¹¾|TW|Taiwan)", interval: 300, tolerance: 20}
  - {name: æ‰‹åŠ¨ ğŸ§Š å…¶ä»–å†·é—¨åœ°åŒº, type: select, include-all: true, filter: "^(?!(.*æ–°åŠ å¡|.*é¦™æ¸¯|.*æ—¥æœ¬|.*ç¾å›½|.*å°æ¹¾)).*$"}

# ğŸ“± åº”ç”¨ç­–ç•¥ç»„ï¼ˆä»¥ OpenAI ä¸ºä¾‹ï¼Œå…¶å®ƒåŒç†ï¼‰
  - {name: ğŸ“± openai åº”ç”¨, type: select, proxies: [auto ğŸ‡¯ğŸ‡µ æ—¥æœ¬, auto ğŸ‡ºğŸ‡¸ ç¾å›½, auto ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, auto ğŸ‡­ğŸ‡° é¦™æ¸¯, auto ğŸ‡¹ğŸ‡¼ å°æ¹¾, æ‰‹åŠ¨ ğŸ§Š å…¶ä»–å†·é—¨åœ°åŒº, DIRECT]}
  - {name: ğŸ“± youtube åº”ç”¨, type: select, proxies: [auto ğŸ‡¯ğŸ‡µ æ—¥æœ¬, auto ğŸ‡ºğŸ‡¸ ç¾å›½, auto ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, auto ğŸ‡­ğŸ‡° é¦™æ¸¯, auto ğŸ‡¹ğŸ‡¼ å°æ¹¾, æ‰‹åŠ¨ ğŸ§Š å…¶ä»–å†·é—¨åœ°åŒº, DIRECT]}
  - {name: ğŸ“± telegram åº”ç”¨, type: select, proxies: [auto ğŸ‡¯ğŸ‡µ æ—¥æœ¬, auto ğŸ‡ºğŸ‡¸ ç¾å›½, auto ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, auto ğŸ‡­ğŸ‡° é¦™æ¸¯, auto ğŸ‡¹ğŸ‡¼ å°æ¹¾, æ‰‹åŠ¨ ğŸ§Š å…¶ä»–å†·é—¨åœ°åŒº, DIRECT]}
  - {name: ğŸ“± netflix åº”ç”¨, type: select, proxies: [auto ğŸ‡¯ğŸ‡µ æ—¥æœ¬, auto ğŸ‡ºğŸ‡¸ ç¾å›½, auto ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, auto ğŸ‡­ğŸ‡° é¦™æ¸¯, auto ğŸ‡¹ğŸ‡¼ å°æ¹¾, æ‰‹åŠ¨ ğŸ§Š å…¶ä»–å†·é—¨åœ°åŒº, DIRECT]}

# ==================== è§„åˆ™é›†å®šä¹‰ ====================
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}

rule-providers:
  netflix_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs"}
  openai_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/openai.mrs"}
  telegram_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"}
  gfw_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs"}
  cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"}
  cn_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"}

# ==================== åˆ†æµè§„åˆ™ ====================
rules:
  - DOMAIN-SUFFIX,local,DIRECT
  - RULE-SET,netflix_domain,ğŸ“± netflix åº”ç”¨
  - RULE-SET,openai_domain,ğŸ“± openai åº”ç”¨
  - RULE-SET,telegram_domain,ğŸ“± telegram åº”ç”¨
  - RULE-SET,gfw_domain,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - RULE-SET,cn_domain,DIRECT
  - RULE-SET,cn_ip,DIRECT
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
